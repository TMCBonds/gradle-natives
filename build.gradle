/*
 * Copyright (c) 2014 Christopher J. Stehno
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

group='com.stehno'
version=0.2

buildscript {
    repositories {
        maven { url 'http://jcenter.bintray.com' }
    }
    dependencies {
        classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:0.5'
    }
}

apply plugin:'groovy'
apply plugin:'maven'
apply plugin:'maven-publish'
apply plugin:'com.jfrog.bintray'

repositories {
	jcenter()
}

dependencies {
	compile gradleApi()
	compile localGroovy()

    testCompile 'junit:junit:4.11'
    testCompile 'org.mockito:mockito-all:1.9.5'
}

task sourcesJar(type: Jar) {
    description = 'Creates sources JAR.'
    classifier = 'sources'

    from project.sourceSets.main.allSource
}

artifacts {
	archives jar
	archives sourcesJar
}

publishing {
    publications {
        mavenJava(MavenPublication){
            artifact jar
			artifact sourcesJar
        }
    }
}

task wrapper( type:Wrapper) {
    gradleVersion = '2.1'
}

// NOTE: run bintrayUpload and then go to web and publish.
bintray {
    user = property('bintray-user')
    key = property('bintray-key')

    publications = ['mavenJava']

    pkg {
        repo = 'public'
        name = 'gradle-natives'
        desc = 'Gradle plugin for managing native libraries associated with Java projects.'
        licenses = ['Apache-2.0']
        labels = ['gradle', 'groovy', 'native']
    }
}